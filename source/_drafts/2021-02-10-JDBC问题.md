---
title: JDBC问题
pathsuffix: jdbc-question
comments: false
date: 2021-02-10 14:58:54
tags: jdbc
category: 技术
---
# 对实体 "characterEncoding" 的引用必须以 ';' 分隔符结尾。
c3p0中，在xml配置文件设置
```xml
<property name="jdbcUrl">jdbc:mysql://localhost:3306/test?useUnicode=true&characterEncoding=utf8&rewriteBatchedStatements=true</property>
```
运行报错。
将`&`修改为`&amp;`即可。

---

# C3P0报错：Acquisition Attempt Failed!!! Clearing pending acquires. While trying to acquire a needed new resource, we failed to succeed more than the maximum number of allowed acquisition attempts (30). Last acquisition attempt exception
可能是这些原因造成：

1，驱动配置有误：`driverClass=com.mysql.jdbc.Driver` 或者 `driverClass=com.mysql.cj.jdbc.Driver`
2，数据库连接地址有误：`jdbcUrl=jdbc:mysql://localhost:3306/test`
3，密码或帐号有误：`user=root`、`password=root`

4，数据库未启动或无权访问

5，项目未引入对应的驱动jar包mysql-connector-java-5.1.6-bin.jar

6，配置文件没有放在src根目录下。移动配置文件到src根目录后要重启tomcat，重启后生效。

---

# Client does not support authentication protocol requested by server; consider upgrading MySQL client
1. 权限问题
```sql
ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY 'root1234';
flush privileges;
SELECT plugin FROM mysql.user WHERE User = 'root';
```

2. 用户名错误

---

# Unknown initial character set index '255' received from server. Initial client character set can be forced via the 'characterEncoding' property.
+ 解决方法：
有两种解决方法, 根据自己项目选择

1、直接在连接数据库语句中的url变量中修改

```java
Connection conn = DriverManager.getConnection("jdbc:mysql://localhost:3306/test","root","root1234");//修改前
 
Connection conn = DriverManager.getConnection("jdbc:mysql://localhost:3306/test?useUnicode=true&characterEncoding=utf8","root","root1234");//修改后
```
 
2、删除原有数据库驱动程序（报错前用的是"mysql-connector-java-5.1.7-bin.jar"），更新为"mysql-connector-java-8.0.13.jar"后解决(<font color='red'>推荐</font>)